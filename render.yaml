services:
  - type: web
    name: signify-backend
    env: python
    region: oregon
    plan: starter
    buildCommand: pip install -r backend/requirements.txt
    startCommand: ./backend/run.sh
    envVars:
      - key: MODELS_DIR
        value: /opt/render/project/src/backend/models
      - key: GLOBAL_STATS_PATH
        value: /opt/render/project/src/backend/models/global_stats.npz
      - key: PROTOTYPES_PATH
        value: /opt/render/project/src/backend/models/prototypes.npz
      - key: DEFAULT_TOP_K
        value: "5"
      - key: MOTION_FLOOR
        value: "0.00075"
      - key: SIM_THRESHOLD
        value: "0.58"
      - key: SIM_MARGIN
        value: "0.10"
      - key: CONFIDENCE_TEMPERATURE
        value: "0.12"
      - key: DTW_ENABLED
        value: "true"
      - key: DTW_RADIUS
        value: "6"
      - key: DTW_ALPHA
        value: "0.65"
      - key: DTW_LAMBDA
        value: "0.002"
      - key: DTW_TOPK
        value: "5"
      - key: ENABLE_CUDA
        value: "false"
      - key: VIDEOS_DIR
        value: /opt/render/project/src/sample_dataset/videos
